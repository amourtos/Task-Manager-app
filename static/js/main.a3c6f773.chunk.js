(this["webpackJsonpkapstone-task-manager"]=this["webpackJsonpkapstone-task-manager"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),o=n.n(c),s=(n(38),n(39),n(7)),i=n(62),l=n(2),u=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(i.a,{variant:"info",onClick:function(){window.localStorage.removeItem("user"),sessionStorage.removeItem("user"),window.location.reload()},children:"LOGOUT"})})},j=n(31),d=n(24),h={user:JSON.parse(localStorage.getItem("user"))||{token:""},todos:[]},b="LOGIN",O=Object(j.a)(Object(d.devtools)(Object(d.redux)((function(e,t){switch(t.type){case b:return{user:t.payload};default:return e}}),h)),{name:"storage"}),f=n(8),p=n.n(f),m=n(16),x=n(9),v="https://sleepy-wave-gazelle.glitch.me",g=function(){var e=Object(m.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+"/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:n,password:r})});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("bad response",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(e,t){return fetch(v+"/tasks/".concat(t),{method:"GET",headers:{Authorization:"".concat(e),"Content-Type":"application/json"}}).then((function(e){return e.json()}))},k=function(e){return fetch(v+"/tasks/mytasks",{method:"GET",headers:{Authorization:"".concat(e),"Content-Type":"application/json"}}).then((function(e){return e.json()}))},C=function(){var e=Object(m.a)(p.a.mark((function e(t,n,r,a,c,o){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,r,a,c,o),e.next=3,fetch(v+"/tasks/mytasks",{method:"POST",headers:{Authorization:"".concat(t),"content-Type":"application/json"},body:JSON.stringify({title:n,details:r,dueDate:a,category:c,user:o})}).then((function(e){return e.json()}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,o){return e.apply(this,arguments)}}(),w=n(61),S=n(12),D=n.n(S),T=n(20),M=n.n(T);var N=function(e){var t=O((function(e){return e.user})),n=Object(r.useState)({}),a=Object(x.a)(n,2),c=a[0],o=a[1],s=function(){var n=Object(m.a)(p.a.mark((function n(){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a=t.token,s=e._id,fetch(v+"/tasks/update/completion/".concat(s),{method:"PATCH",headers:{Authorization:"".concat(a),"Content-Type":"application/json"}}).then((function(e){return console.log(e)}));case 2:return n.next=4,y(t.token,e._id);case 4:r=n.sent,o(r),console.log(c),e.something();case 8:case"end":return n.stop()}var a,s}),n)})));return function(){return n.apply(this,arguments)}}(),u=function(){var n=Object(m.a)(p.a.mark((function n(){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a=t.token,c=e._id,fetch(v+"/tasks/delete/".concat(c),{method:"DELETE",headers:{Authorization:"".concat(a),"Content-Type":"application/json"}});case 2:return n.next=4,y(t.token,e._id);case 4:r=n.sent,o(r),e.something();case 7:case"end":return n.stop()}var a,c}),n)})));return function(){return n.apply(this,arguments)}}(),j=function(e){var t=D()().countdown(e,M.a.DAYS,1).toString();"h"!==t[3]&&"h"!==t[2]||(t="Today");var n=D()().countdown(e,M.a.DAYS,1).start,r=D()().countdown(e,M.a.DAYS,1).end,a=D()(n).format("MMDD"),c=D()(r).format("MMDD");return 1===Math.sign(a-c)&&(t="Past Due"),t};return Object(r.useEffect)((function(){(function(){var n=Object(m.a)(p.a.mark((function n(){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(t.token,e._id).catch((function(e){return console.log(e)}));case 2:r=n.sent,o(r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[t]),Object(l.jsx)("div",{class:"container h-100",children:null===c?Object(l.jsx)("div",{}):Object(l.jsx)("div",{class:"row h-100 justify-content-center align-items-center",children:Object(l.jsxs)(w.a,{bg:"dark",border:"success",style:{width:"45rem"},children:[Object(l.jsxs)(w.a.Header,{border:"success",children:[" ",Object(l.jsxs)(w.a.Title,{children:["Category: ",c.category]})]}),Object(l.jsxs)(w.a.Body,{children:[Object(l.jsx)(w.a.Title,{children:c.title}),Object(l.jsxs)(w.a.Subtitle,{className:"mb-2 text",style:"Today"===j(c.dueDate)||"Past Due"===j(c.dueDate)?{color:"red"}:{color:"lightgreen"},children:["Due: ",j(c.dueDate)]}),Object(l.jsxs)(w.a.Subtitle,{className:"mb-2 text-muted",children:["Due by: ",D()(c.dueDate).format("MMM Do, YY")]}),Object(l.jsx)(w.a.Text,{children:c.details}),Object(l.jsx)(w.a.Subtitle,{className:"mb-2 text-muted",children:!0===c.completed?"completed":""}),!0===c.completed?Object(l.jsx)(i.a,{variant:"Dark",onClick:s,children:"OOPS! This isn't finished."}):Object(l.jsx)(i.a,{variant:"success",onClick:s,children:"Click to Complete"}),Object(l.jsx)(i.a,{variant:"danger",onClick:u,children:"Delete"})]})]})})})},Y=n(15),I=n(17),P=n(60);var E=function(e){var t,n=O((function(e){return e.user})),a=Object(r.useState)({title:"",details:"",dueDate:"",category:""}),c=Object(x.a)(a,2),o=c[0],s=c[1],u=function(t){C(n.token,o.title,o.details,o.dueDate,o.category,n.id),e.updateMatter(Math.random()),e.something()},j=function(e){var t=e.target.name,n=e.target.value;s((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(Y.a)({},t,n))}))};return Object(l.jsxs)("div",{class:"container h-100",children:[Object(l.jsx)("h1",{children:"Create your To Do that You Can Do"}),Object(l.jsxs)(P.a,(t={onSubmit:u,style:{width:"69rem"},class:"container"},Object(Y.a)(t,"class","h-100 w-100 justify-content-center align-items-center"),Object(Y.a)(t,"children",[Object(l.jsxs)(P.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(l.jsx)(P.a.Label,{children:"Title: "}),Object(l.jsx)(P.a.Control,{name:"title",type:"text",placeholder:"do your laundry",onChange:j,value:o.title,required:!0})]}),Object(l.jsxs)(P.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(l.jsx)(P.a.Label,{children:"Details of Todo: "}),Object(l.jsx)(P.a.Control,{name:"details",as:"textarea",rows:3,onChange:j,value:o.details,required:!0})]}),Object(l.jsxs)(P.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(l.jsx)(P.a.Label,{children:"Must Be Completed By: "}),Object(l.jsx)(P.a.Control,{name:"dueDate",type:"date",placeholder:"enter due date",onChange:j,value:o.dueDate,class:"w-50",required:!0})]}),Object(l.jsxs)(P.a.Group,{controlId:"exampleForm.ControlSelect1",children:[Object(l.jsx)(P.a.Label,{children:"Category"}),Object(l.jsxs)(P.a.Control,{class:"w-50",name:"category",as:"select",value:o.category,onChange:j,children:[Object(l.jsx)("option",{children:"Please Select A Category"}),Object(l.jsx)("option",{children:"Fitness"}),Object(l.jsx)("option",{children:"School"}),Object(l.jsx)("option",{children:"Work"}),Object(l.jsx)("option",{children:"Chores"}),Object(l.jsx)("option",{children:"Misc"})]})]}),Object(l.jsx)(i.a,{variant:"info",onClick:u,children:"Submit Todo"})]),t))]})},L=n(59),A=n(33);n(51),n(52);var G=function(e){var t=O((function(e){return e.user})),n=Object(r.useState)(0),a=Object(x.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)([]),u=Object(x.a)(s,2),j=u[0],d=u[1],h=Object(r.useState)(new Date),b=Object(x.a)(h,2),f=b[0],v=b[1],g=function(){var e=Object(m.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t.token);case 2:n=e.sent,d(n),console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g()}),[c]),Object(l.jsx)("div",{children:Object(l.jsxs)("section",{className:"main",children:[t.token?Object(l.jsx)(E,{something:g,updateMatter:o}):null,Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("h3",{children:"Todo List"}),Object(l.jsx)("br",{}),t.token?Object(l.jsx)(A.a,{class:"calendar",onChange:function(e){v(e),console.log(D()(e).format("MMM Do, YYYY")),k(t.token).then((function(t){var n=t.filter((function(t){return D()(t.dueDate).format("MMM, Do, YYYY")===D()(e).format("MMM, Do, YYYY")}));d(n)}))},value:f}):null,Object(l.jsx)("br",{}),Object(l.jsxs)(L.a,{size:"lg",className:"mb-2",children:[Object(l.jsx)(i.a,{variant:"info",onClick:function(){k(t.token).then((function(e){var t=e.filter((function(e){return"Fitness"===e.category}));d(t)}))},children:"Fitness"}),Object(l.jsx)(i.a,{variant:"info",onClick:function(){k(t.token).then((function(e){var t=e.filter((function(e){return"School"===e.category}));d(t)}))},children:"School"}),Object(l.jsx)(i.a,{variant:"info",onClick:function(){k(t.token).then((function(e){var t=e.filter((function(e){return"Work"===e.category}));d(t)}))},children:"Work"}),Object(l.jsx)(i.a,{variant:"info",onClick:function(){k(t.token).then((function(e){var t=e.filter((function(e){return"Chores"===e.category}));d(t)}))},children:"Chores"}),Object(l.jsx)(i.a,{variant:"info",onClick:function(){k(t.token).then((function(e){var t=e.filter((function(e){return"Misc"===e.category}));d(t)}))},children:"Misc"}),Object(l.jsx)(i.a,{variant:"info",onClick:g,children:"All"}),Object(l.jsx)(i.a,{variant:"info",onClick:function(){k(t.token).then((function(e){var t=e.filter((function(e){return!0===e.completed}));d(t)}))},children:"Completed"}),Object(l.jsx)(i.a,{variant:"info",onClick:function(){k(t.token).then((function(e){var t=e.filter((function(e){return!1===e.completed}));d(t)}))},children:"Not Completed"})]}),Object(l.jsx)("ul",{className:"todo-list",children:j.map((function(e){return Object(l.jsx)(N,{something:g,updateMatter:o,title:e.title,details:e.details,completed:e.completed,dueDate:e.dueDate,createdAt:e.createdAt,category:e.category,_id:e._id},e._id)}))})]})})};var F=function(e){var t=O((function(e){return e.dispatch})),n=Object(r.useState)({email:"",password:""}),a=Object(x.a)(n,2),c=a[0],o=a[1],s=O((function(e){return e.user})),u=function(e){var t=e.target.name,n=e.target.value;o((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(Y.a)({},t,n))}))};return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(P.a,{onSubmit:function(e){var n,r;e.preventDefault(),(n=c.email,r=c.password,fetch(v+"/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})}).then((function(e){return e.json()}))).then((function(e){t({type:b,payload:e}),window.localStorage.setItem("user",JSON.stringify(e))}))},children:[Object(l.jsxs)(P.a.Group,{controlId:"formBasicEmail",children:[Object(l.jsx)(P.a.Label,{children:"Email"}),Object(l.jsx)(P.a.Control,{name:"email",type:"text",placeholder:"email",value:c.email,required:!0,onChange:u})]}),Object(l.jsxs)(P.a.Group,{controlId:"formBasicPassword",children:[Object(l.jsx)(P.a.Label,{children:"Password"}),Object(l.jsx)(P.a.Control,{name:"password",type:"password",placeholder:"Password",value:c.password,required:!0,onChange:u})]}),Object(l.jsx)(i.a,{variant:"info",type:"submit",children:"LOGIN"}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{children:s.message?s.message:""})]})})},B=n(18),_=(n(53),function(e){return e.trigger?Object(l.jsx)("div",{className:"popup",children:Object(l.jsxs)("div",{className:"popup-inner",children:["Thank you for using You Can Dos! We hope you enjoy our app. Click the button below to start doing your You Can Dos.",Object(l.jsx)("br",{}),Object(l.jsx)("button",{className:"close-button",onClick:function(){return e.setTrigger(!1)},children:Object(l.jsx)(B.b,{to:"/",children:"Click here to login"})}),e.children]})}):""});var q=function(e){var t=Object(r.useState)(!1),n=Object(x.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)({username:"",email:"",password:""}),s=Object(x.a)(o,2),u=s[0],j=s[1],d=function(e){var t=e.target.name,n=e.target.value;j((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(Y.a)({},t,n))}))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)(P.a,{onSubmit:function(e){e.preventDefault(),g(u.username,u.email,u.password).then((function(){return c(!0)})).catch((function(){alert("Username or email may already be taken. Try again.")}))},children:[Object(l.jsxs)(P.a.Group,{children:[Object(l.jsx)(P.a.Label,{children:"Username"}),Object(l.jsx)(P.a.Control,{name:"username",type:"text",placeholder:"username",onChange:d,value:u.username,required:!0})]}),Object(l.jsxs)(P.a.Group,{controlId:"formBasicEmail",children:[Object(l.jsx)(P.a.Label,{children:"email"}),Object(l.jsx)(P.a.Control,{name:"email",type:"email",placeholder:"Enter Email",onChange:d,value:u.email,required:!0})]}),Object(l.jsxs)(P.a.Group,{controlId:"formBasicPassword",children:[Object(l.jsx)(P.a.Label,{children:"Password"}),Object(l.jsx)(P.a.Control,{name:"password",type:"password",placeholder:"Password",value:u.password,required:!0,onChange:d})]}),Object(l.jsx)(i.a,{variant:"info",type:"submit",children:"Submit"})]}),Object(l.jsx)(_,{trigger:a,setTrigger:c})]})};var z=function(){var e=O((function(e){return e.user}));return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)("br",{}),Object(l.jsx)("h2",{children:"You can do whatever you put your mind to!"}),!e.token&&Object(l.jsxs)("div",{children:[Object(l.jsx)(F,{})," ",Object(l.jsx)("h2",{children:"Not a member? Register below ^_^"})," ",Object(l.jsx)(q,{})]})]})},J=function(){var e=O((function(e){return e.user}));return Object(l.jsxs)("div",{class:"main-page",children:[Object(l.jsx)(z,{}),e.token?Object(l.jsx)(G,{}):null,e.token?Object(l.jsx)(u,{}):null]})};n(57);var R=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"ERROR PAGE 404"}),Object(l.jsx)(i.a,{variant:"info",children:Object(l.jsx)(B.b,{to:"/",className:"link",children:"Back Home"})})]})};var W=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{exact:!0,path:"/",component:J}),Object(l.jsx)(s.a,{component:R})]})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(B.a,{basename:"/Task-Manager-app",children:Object(l.jsx)(W,{})})}),document.getElementById("root")),H()}},[[58,1,2]]]);
//# sourceMappingURL=main.a3c6f773.chunk.js.map